var e,r=0,t=!1;function n(){t=!0,document.querySelector(".message-start").classList.add("hidden"),document.querySelector(".start").classList.add("hidden"),document.querySelector(".restart").classList.remove("hidden"),i(),i()}function o(){e=Array.from({length:4},function(){return[,,,,].fill(0)}),r=0,t=!1,c(),document.querySelector(".game-score").innerText=r,document.querySelector(".restart").classList.add("hidden"),document.querySelector(".message-lose").classList.add("hidden"),document.querySelector(".message-win").classList.add("hidden"),document.querySelector(".start").classList.remove("hidden"),document.querySelector(".message-start").classList.remove("hidden")}function c(){var r=document.getElementById("board");r.innerHTML="";for(var t=0;t<4;t++)for(var n=0;n<4;n++){var o=document.createElement("div");o.id="".concat(t,"-").concat(n),d(o,e[t][n]),r.append(o)}}function a(){return e.some(function(e){return e.includes(0)})}function i(){if(a())for(var r=!1;!r;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===e[t][n]){var o=.6>Math.random()?2:4;e[t][n]=o,d(document.getElementById("".concat(t,"-").concat(n)),o,!0),r=!0}}}function d(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.innerText=r>0?r:"",e.className="field-cell".concat(r>0&&r<=2048?" field-cell--".concat(r):""),t&&(e.style.transform="scale(0.5)",setTimeout(function(){e.style.transform="scale(1)"},50))}function s(e){return e.filter(function(e){return 0!==e})}function u(e){e=s(e);for(var t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,r+=e[t]);for(e=s(e);e.length<4;)e.push(0);return e}function f(){for(var r=0;r<4;r++)e[r]=u(e[r]);y()}function l(){for(var r=0;r<4;r++)e[r]=u(e[r].reverse()).reverse();y()}function m(){for(var r=function(r){for(var t=u(e.map(function(e){return e[r]})),n=0;n<4;n++)e[n][r]=t[n]},t=0;t<4;t++)r(t);y()}function v(){for(var r=function(r){for(var t=u(e.map(function(e){return e[r]}).reverse()).reverse(),n=0;n<4;n++)e[n][r]=t[n]},t=0;t<4;t++)r(t);y()}function y(){for(var r=0;r<4;r++){for(var n=0;n<4;n++)d(document.getElementById("".concat(r,"-").concat(n)),e[r][n]);if(e[r].includes(2048)){document.querySelector(".message-win").classList.remove("hidden"),t=!1;return}(function(){if(a())return!1;for(var r=0;r<4;r++)for(var t=0;t<4;t++){var n=e[r][t];if(r>0&&e[r-1][t]===n||r<3&&e[r+1][t]===n||t>0&&e[r][t-1]===n||t<3&&e[r][t+1]===n)return!1}return!0})()&&(document.querySelector(".message-lose").classList.remove("hidden"),t=!1)}}document.addEventListener("DOMContentLoaded",function(){e=Array.from({length:4},function(){return[,,,,].fill(0)}),c(),document.querySelector(".start").addEventListener("click",n),document.querySelector(".restart").addEventListener("click",o)}),document.addEventListener("keyup",function(n){var o=JSON.stringify(e);if(t){var c={ArrowLeft:f,ArrowRight:l,ArrowUp:m,ArrowDown:v};c[n.code]&&(c[n.code](),o!==JSON.stringify(e)&&i()),document.querySelector(".game-score").innerText=r}});
//# sourceMappingURL=index.d9e77f92.js.map
